# Conceptual Data Model

## 1. Class Diagram
![Class Diagram](../Images/uml/model.svg)

### Constraints
| Class | Constraints |
| ---|---|
| User               | username NOT NULL UNIQUE <br> password NOT NULL <br> name NOT NULL <br> date of birth < today <br> location NOT NULL |
| Band               | name NOT NULL UNIQUE <br> creation date DEFAULT today |
| Content            | date DEFAULT today <br> text NOT NULL |
| Post               | If post has a band, user who posts has to be member of the band <br> private NOT NULL |
| Ban                | Only one ban without cease date <br> Ban → (User ⊕ Band) |
| NotificationTrigger| type {user_follower, band_follower, message, comment, band_application, band_invitation, user_warning, band_warning, band_invitation_accepted, band_invitation_rejected, band_application_accepted, band_application_rejected} <br> NotificationTrigger (generated by) → (UserFollower ⊕ BandFollower ⊕ Message ⊕ Comment ⊕ BandApplication ⊕ BandInvitation ⊕ UserWarning ⊕ BandWarning) <br> The "generated by" unique connection depends on the type value |
| Message            | if message has a band, sender has to be member of the band <br> Message (received by) → (User ⊕ Band) |
| Report             | text NOT NULL <br> date DEFAULT today <br> Report → (Content ⊕ User ⊕ Band)|
| Country            | name NOT NULL |
| City               | name NOT NULL |
| BandInvitation     | status {pending, accepted, rejected, cancelled} |
| Genre              | name NOT NULL UNIQUE |
| Skill              | name NOT NULL UNIQUE |
| Application        | status: {cancelled, pending, accepted, rejected} <br> date DEFAULT today |
| BandMembership     | date DEFAULT today <br> isOwner NOT NULL |
| UserSkill          | level NOT NULL |
| *Admin Tasks*      | add constraints to all user connections which require admin privileges |


## 2. Aditional Business Rules

| Business Rules                                                                           |
| ---------------------------------------------------------------------------------------- |
| If the message is sent on behalf of the band, the sender has to be a member of the band. |
| If content is posted on behalf of the band, the poster has to be a member of the band.   |


## Revision history

> Revision 1
 * Updated UML diagram:
    * NotificationTrigger structure and connections;
    * Admin - User structure improved;
    * Minor modifications;
 * Contrains removed from UML Diagram and displayed in a table after it;

***

GROUP1712, 12/03/2018

> João Pinheiro, up201104913@fe.up.pt

> Leonardo Teixeira, up201502848@fe.up.pt

> Danny Soares, up201505509@fe.up.pt

> João Azevedo, up201503256@fe.up.pt
