# A7: High-level architecture. Privileges. Web resources specification
 
## 1. Overview
 
| Module                                     | Description                                                                                                                                                                                                                                     |
| ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| M01: Authentication And Indiviudal Profile | Web resources associated with user login and logout and the manangement of his/her profile and managemento of notifications and general serch capabilities                                                                                      |
| M02: User Administration / Static Pages    | Web resources for administrator profile, including user management like giving and taking bans to user and bands, giving warns to users and bands, create, edit and delete genres and skills and manage user permissions                        |
| M03 User Feed                              | Web resources for the main page of the user. This module will have resources to create and delete posts and view posts from users or bands that user follows                                                                                    |
| M04 Bands                                  | Web resources for the band profile page. This module will have resources to create and delete band posts, view and modify band information and capabilities of inviting and removing band members as well as accept or reject band applications |
| M05 Chat                                   | Web resources for chat functionality, these resources include sending and receiving messages from users and bands                                                                                                                               |

## 2. Permissions

| Permission | Name | Description |
| ---------- | ---- | ----------- |
| PUB | Public | Priviliges for non-authenticated users |
| USR | User | Privileges for authenticated users |
| BOW | Band Owner | Privileges for band owners (on the band he/her owns) |
| ADM | Administrator | Privileges for administrator users |


## 3. Modules

This section documents each web resource of each module, indicating the URL, HTTP methods, the possible parameters, interfaces with the user (referring to the A3 artefact) â€” or JSON responses in the event of APIs.
Module M01: Authentication and Individual Profile
Endpoints of Module Authentication and Individual Profile



These are the endpoints available in the Authentication and Individual Profile Module.

    * R101: Login Form /login
    * R102: Login Action /login
    * R103: Login Google API /api/google
    * R104: Login Facebook API /api/facebook
    * R105: Logout Action /logout
    * R106: Register Form /register
    * R107: Register Action /register
    * R108: View Profile /users/{userID}
    * R109: Edit Profile Form /users/{userID}/edit
    * R110: Edit Profile Action /users/{userID}
    * R111: Password Reset Form /password/reset
    * R112: Password Reset Action /password/reset


R101: Login Form


|             |                                   |
|-------------|-----------------------------------|
|   URL       | /login                            |
| Description | Page with login form              |
| Method      | GET                               |
| UI          | [UI01](https://github.com/joaopedrofump/lbaw1712/blob/master/Deliveries/lbaw1712_a3-2.pdf) |
| SUBMIT      | [R102](https://pages.github.com/) |
| PERMISSIONS | PUB                               |


R102: Login Action

|               |                                                                                                       |
|---------------|-------------------------------------------------------------------------------------------------------|
|     URL       |       /login                                                                                          |
|  Description  | Web resource that logs the user, redirecting to user profile page if successful or login form if not  |
|   Method      |       POST                                                                                            |
| Request Body  | +email:string                             |   Username                                                |
|               | +password:string                          |   Password                                                |
|  Redirects    |   [R108](https://pages.github.com/)       |   Success                                                 |
|               |   [R101](https://pages.github.com/)       |   Error                                                   |
|  Permissions  |  PUB                                                                                                  |


R103: Login Google API /api/google

R104: Login Facebook API /api/facebook

R105: Logout Action /logout

|               |                                                                                                  |
|---------------|--------------------------------------------------------------------------------------------------|
|     URL       |                                     /logout                                                      |
|  Description  |     Web resource that logs out the user                                                          |
|  Method       |        POST                                                                                      |
|  Redirects    |        [R101](https://pages.github.com/)                  |               Success                |
|  Permissions  |               USR, ADM                                                                           |



R106: Register Form /register


|             |                                                                                             |
|-------------|---------------------------------------------------------------------------------------------|
|   URL       | /register                                                                                   |
| Description | Page with a register form  to create a new user account                                     |
| Method      | GET                                                                                         |
| UI          | [UI04](https://github.com/joaopedrofump/lbaw1712/blob/master/Deliveries/lbaw1712_a3-2.pdf)  |
| SUBMIT      | [R107](https://pages.github.com/)                                                           |
| PERMISSIONS | PUB                                                                                         |



R107: Register Action /register


|               |                                                                                                                |
|---------------|----------------------------------------------------------------------------------------------------------------|
|     URL       |       /register                                                                                                |
|  Description  | Web resource that inserts the user into the system, redirecting to user profile page if successful or register form if not  |
|   Method      |       POST                                                                                                     |
| Request Body  | +email:string                             |   Username                                                |
|               | +password:string                          |   Password                                                |
|               | +confirm_password:string                  |   Password   confirmation                                          |
|               | +picture:string                           |   Profile picture path                                     |

|  Redirects    |   [R101](https://pages.github.com/)       |   Success                                                 |
|               |   [R107](https://pages.github.com/)       |   Error                                                   |
|  Permissions  |  PUB                                                                                                  |


